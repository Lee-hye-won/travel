<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">
<!-- 각 페이지의 CSS가 작성될 위치 -->
<th:block layout:fragment="css">
	<style>
.login-cover {
	width: 100%;
	height: 460px;
	background-image: url("/img/imgs1022.jpg");
	background-repeat: no-repeat;
	background-size: cover;
	margin-bottom: 50px;
	background-position: center;
}



.text-black {
	text-align: center;
	
}
</style>
</th:block>
<div layout:fragment="content">
	<div class="login-cover">

	</div> <!--백그라운드 이미지 활용  -->
	<div class="site-section">
		<div class="container" style="width: 800px">
			<div class="row">
				<div class="col-md-12">
					<form role="form" action="/members/login" method="post">
						<div class="form-group row">
							<div class="col-md-12">
								<label th:for="email" class="text-black" style="width:100%; justify-content: center; margin:  15px auto; align-items: center; font-size: 25px; font-weight: bold;">아이디/이메일</label> <input
									type="email" class="form-control" id="email" name="email"
									placeholder="Email">
							</div>
						</div>
						<label><input type="checkbox" name="id_save" id="id_save"/>이메일
								기억</label>	
						<div class="form-group row">
							<div class="col-md-12">
								<label th:for="password" class="text-black" style="width:100%; justify-content: center; margin: 15px auto; align-items: center; font-size: 25px;  font-weight: bold;">비밀번호</label> <input
									type="password" class="form-control" id="password"
									name="password" placeholder="Password">
							</div>
						</div>
						<div class="form-group">
							<p th:if="${loginErrorMsg}" class="error"
								th:text="${loginErrorMsg}"></p>
						
							<div style="margin-bottom: 50px;">
								<button type="submit" class="btn btn-primary mb-3" id="loginbtn" style="width: 100%; background-color: #FF4A52; border: none;  font-weight: bold; " >로그인</button>

							</div>
							<div style="display: flex; width:100%; justify-content: center; margin:  0 auto; align-items: center; margin-bottom: 50px">
								<a href="/account/search" style=" margin: 0 10px;  font-weight: bold;">아이디 찾기</a>
								<p >|</p>
								<a href="/account/pssearch"   style="margin: 0 10px;  font-weight: bold;">비밀번호 찾기</a>
								<p>|</p>
								<a href="/members/new"   style="margin: 0 10px;  font-weight: bold;">회원가입</a>
							</div>
							
							
						</div>
						<input type="hidden" th:name="${_csrf.parameterName}"
							th:value="${_csrf.token}">

					</form>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- 각 페이지의 스크립트가 작성될 위치 -->
<th:block layout:fragment="script">
	<script type="text/javascript" th:src="@{/js/cookie.js}"></script>
	<script th:inline="javascript">
		//쿠키를 이용한 아이디 기억
		$(document).ready(function() {
			var userInputId = getCookie("userInputId"); //쿠키값(이메일주소)을 가져온다.
			var setCookieYN = getCookie("setCookieYN"); //쿠키값(이메일 저장 여부)을 가져온다.

			if (setCookieYN == 'Y') { //이메일 저장 여부가 Y면
				$("#id_save").prop("checked", true); //이메일 저장 체크박스를 제크한다.
				$("#email").val(userInputId); //이메일 input창에는 쿠키에서 가져온 이메일 주소를 넣는다.
			} else {
				$("#id_save").prop("checked", false);
			}

			//로그인 버튼 클릭시 쿠키에 이메일 저장여부, 이메일 저장
			$("#loginbtn").click(function() {
				if ($("#id_save").is(":checked")) { //이메일 저장에 체크가 되어 있다면
					var userInputId = $("#email").val(); //이메일 값을 가져온다.

					//쿠키 생성
					setCookie("userInputId", userInputId, 60); //이메일 지정
					setCookie("setCookieYN", "Y", 60); //이메일 저장여부 저장
				} else {
					//쿠키 삭제
					deleteCookie("userInputId");
					deleteCookie("setCookieYN");
				}
			});
		});
	</script>
</th:block>
</html>