<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">
	
	<th:block layout:fragment="css">
	  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
		<style>
.animated-text{
  color: #fff;
  position: absolute;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 0 40px;
  height: 60px;
  overflow: hidden;
  font-size: 18px;
}

a{
	text-decoration: none;
}

.line{
  text-transform: uppercase;
  text-align: center;
  line-height: 60px;
}

.line:first-child{
  animation: anim 36s infinite;
}

@keyframes anim {
  0%{
    margin-top : 0;
  }
  16%{
    margin-top : -60px;
  }
  33%{
    margin-top : -120px;
  }
  50%{
    margin-top : -180px;
  }
  66%{
    margin-top : -120px;
  }
  82%{
    margin-top : -60px;
  }
  100%{
    margin-top : 0;
  }
}

ul {
	margin-bottom: 0px;
	padding-left: 0px;
}
		</style>
	</th:block>
	

<div layout:fragment="content">

<div id=loadData>

<div class="slider_area">
        <div class="slider_active owl-carousel">
            <div class="single_slider  d-flex align-items-center slider_bg_1 overlay">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-xl-12 col-md-12">
                            <div class="slider_text text-center">
                                <h3>Gyeongbokgung</h3>
                                <a href="/planner" class="boxed-btn3" style="margin-top:130px;"  data-bs-toggle="modal" data-bs-target="#exampleModal">플랜 만들기</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="single_slider  d-flex align-items-center slider_bg_2 overlay">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-xl-12 col-md-12">
                            <div class="slider_text text-center">
                                <h3>Gwangalli</h3>
                                <a href="/planner" class="boxed-btn3" style="margin-top:130px;"  data-bs-toggle="modal" data-bs-target="#exampleModal">플랜 만들기</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="single_slider  d-flex align-items-center slider_bg_3 overlay">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-xl-12 col-md-12">
                            <div class="slider_text text-center">
                                <h3>Hallasan</h3>
                                <a href="/planner" class="boxed-btn3" style="margin-top:130px;"  data-bs-toggle="modal" data-bs-target="#exampleModal">플랜 만들기</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="where_togo_area">
        <div class="container">
	<div class ="animated-text" >
		<div class="line" th:each="info, status:${infos.getContent()}">
      		<a style="color:white;" th:href="'/info/' + ${info.id}" th:text="'공지사항: ' + ${info.infoTitle}"></a>
			
		</div>
      
    </div>
        </div>
    </div>

    <div class="popular_places_area">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="section_title text-center mb_70">
                        <h3>플랜 둘러보기</h3>
                        <p>여러분의 여행계획을 모두에게 공유해보세요.</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <a th:href="'/community/viewCommunityInfo/' + ${community.id}"
                 class="col-lg-4 col-md-6" th:each="community : ${community}">
                    <div class="single_place">
                        <div class="thumb">
                            <img th:src="${community.plan.planContent[0].place_img}"
								th:alt="${community.plan.planContent[0].place_img}"
								style="width: 100%; height: 233px;">
                        </div>
                        <div class="place_info" style="padding-bottom:5px;">
							<div >
								<h3 th:text="${community.communityTitle}" 
								style="width:300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; 
								font-size:20px; font-weight:bold; margin-bottom:15px;">제목</h3>
							</div>
							<div style="display: flex; justify-content: space-between;">
								<p th:text="${community.member.name}" 
								style="width:100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">작성자</p>
								<p class="communityRegTime" th:text="${community.communityRegDate}">작성시간</p>
							</div>
						</div>
                    </div>
                </a>
            </div>
            
            <div class="row">
                <div class="col-lg-12">
                    <div class="more_place_btn text-center">
                        <a class="boxed-btn4" href="/planner/list">플랜 더보기</a>
                    </div>
                </div>
            </div>
        </div>
	</div>
</div>
    
    	
<div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" style="width:1110px; height:487px; margin: 0 auto 135px auto; ">
	  <div class="carousel-inner" style="border-radius:20px; ">
	    <div class="carousel-item active">
	      <a href="/adminTour/tours">
	      <img src="img/경주.jpg" class="d-block w-100" alt="...">
	      </a>
	    </div>
	    <div class="carousel-item">
	     <a href="/adminTour/tours">
	      <img src="img/부산.jpg" class="d-block w-100" alt="...">
	      </a>
	    </div>
	    <div class="carousel-item" >
	     <a href="/adminTour/tours">
	      <img src="img/강릉.jpg" class="d-block w-100" alt="...">
	      </a>
	    </div>
	  </div>
	  <div style="width:146px; height: 47px;">
	  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev"
	  	style="border: none !important; background: none !important;">
	    <span class="visually-hidden">이전</span>
	  </button>
	  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next"
	  	style="border: none !important; background: none !important;">
	    <span class="visually-hidden">다음</span>
	  </button>	  
	  </div>
	</div>
	
	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="margin: 15rem auto;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">새로운 플랜</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <label for="inputTravelNm" class="form-label" style="color: black;">이번 여행의 이름을 정해주세요.</label>
			<input type="text" id="travelNm" class="form-control" aria-describedby="passwordHelpBlock" placeholder="최대 12글자">
			<div id="passwordHelpBlock" class="form-text"></div>
		<label for="inputDate" class="form-label" style="color: black;">며칠동안 여행을 하시나요?</label>
			<input type="number" min="1" max="10" id="date" class="form-control" placeholder="최대 10일" aria-describedby="passwordHelpBlock">
			<div id="passwordHelpBlock" class="form-text"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="sendData()" style="background-color: #FF4A52; border: none;">플랜 만들기</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="border: 1.5px solid #FF4A52; background-color: white; color: black;">닫기</button>
      </div>
    </div>
  </div>
</div>

</div>

<th:block layout:fragment="script">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
	<script>
		function sendData() {
    var input1 = document.getElementById("travelNm").value;
    var input2 = document.getElementById("date").value;
    
    if(input1 == null || input1 == "") {
        alert("여행 이름을 입력해주세요.(최대 12자)");
    } else if(input1.length > 12) {
        alert("여행 이름은 최대 12자까지만 가능합니다.");
    } else if(input2 < 1 || input2 > 10) {
        alert("최대 여행일수는 10일 입니다.");
    } else {
        var queryParams = "?travelNm=" + encodeURIComponent(input1) + "&date=" + encodeURIComponent(input2);
        window.location.href = "/planner" + queryParams;    			
    }
}

		
		$(document).ready(function() {
            // 페이지가 로드될 때 데이터를 비동기적으로 가져와서 표시
            loadData();
        });

        function loadData() {
            $.ajax({
                url: "/load/data", // 데이터를 가져올 엔드포인트 URL
                type: "GET",
                success: function(data) {
                    // 데이터를 가져온 후에 처리할 내용
                    $("#dataContainer").html(data);
                }
            });
        }	
        
        document.addEventListener("DOMContentLoaded", function() {
  		// "communityRegTime" 클래스를 가진 모든 p 태그를 찾는다.
  		var elements = document.querySelectorAll('p.communityRegTime');

  		// 각 요소를 순회하면서 시간 부분을 제거한다.
  		elements.forEach(function(element) {
  		  var text = element.innerText;
  		  var dateOnly = text.split(' ')[0];  // 공백을 기준으로 문자열을 분리하고 첫 번째 부분만 가져온다.
  		  element.innerText = dateOnly;
  		});
		});

	</script>
</th:block>
</html>